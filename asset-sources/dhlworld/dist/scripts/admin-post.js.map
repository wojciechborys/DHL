{"version":3,"sources":["../assets/scripts/admin-post.js"],"names":["jQuery","$","uploaderInit","wp","media","title","library","type","button","text","multiple","createImage","src","attr","uploader","on","evt","this","preview","closest","find","imageID","preventDefault","attachment","state","get","first","toJSON","image","url","remove","appendTo","val","id","parent","removeClass","open","addClass","children"],"mappings":"AAAAA,OAAA,SAAAC,GAGA,QAAAC,KACA,MAAAC,IAAAC,OACAC,MAAA,cACAC,SAEAC,KAAA,SAEAC,QACAC,KAAA,eAEAC,UAAA,IAIA,QAAAC,GAAAC,GACA,MAAAX,GAAA,WAAAY,KAAA,MAAAD,GAAAC,KAAA,QAAA,YAAAA,KAAA,oBAAA,IAjBA,GAAAC,EAoBAb,GAAA,QAAAc,GAAA,QAAA,sBAAA,SAAAC,GACA,GAAAR,GAAAP,EAAAgB,MACAC,EAAAV,EAAAW,QAAA,oBAAAC,KAAA,wBACAC,EAAAb,EAAAW,QAAA,oBAAAC,KAAA,kBAEAJ,GAAAM,iBAEAR,IACAA,EAAAZ,IAEAY,EAAAC,GAAA,SAAA,WACA,GAAAQ,GAAAT,EAAAU,QAAAC,IAAA,aAAAC,QAAAC,SACAC,EAAAjB,EAAAY,EAAAM,IAEAX,GAAAE,KAAA,uBAAAU,SAEAF,EAAAG,SAAAb,GACAG,EAAAW,IAAAT,EAAAU,IAEAzB,EAAA0B,SAAAd,KAAA,uBAAAe,YAAA,aAIArB,EAAAsB,SACArB,GAAA,QAAA,sBAAA,SAAAC,GACA,GAAAR,GAAAP,EAAAgB,KAEAD,GAAAM,iBAEAd,EAAA6B,SAAA,UAAAlB,QAAA,oBAAAC,KAAA,wBAAAkB,WAAAR,SACAtB,EAAAW,QAAA,oBAAAC,KAAA,mBAAAY,IAAA","file":"admin-post.js","sourcesContent":["jQuery(function($){\r\n    var uploader;\r\n\r\n    function uploaderInit(){\r\n        return wp.media({\r\n            title: 'Wstaw obraz',\r\n            library : {\r\n            //    uploadedTo: wp.media.view.settings.post.id,\r\n                type: 'image'\r\n            },\r\n            button: {\r\n                text: 'Uzyj obrazu' // button label text\r\n            },\r\n            multiple: false\r\n\t\t});\r\n    }\r\n\r\n    function createImage(src){\r\n        return $('<img />').attr('src', src).attr('class', 'ap-image').attr('data-choose-image', '');\r\n    }\r\n\r\n\t$('body').on('click', '[data-choose-image]', function(evt){\r\n        var button = $(this),\r\n            preview = button.closest('[data-image-box]').find('[data-image-preview]'),\r\n            imageID = button.closest('[data-image-box]').find('[data-image-id]');\r\n\r\n        evt.preventDefault();\r\n\r\n        if (!uploader) {\r\n            uploader = uploaderInit();\r\n\r\n            uploader.on('select', function(){ // it also has \"open\" and \"close\" events\r\n                var attachment = uploader.state().get('selection').first().toJSON();\r\n                var image = createImage(attachment.url);\r\n\r\n                preview.find('[data-choose-image]').remove();\r\n\r\n                image.appendTo(preview);\r\n                imageID.val(attachment.id);\r\n\r\n                button.parent().find('[data-remove-image]').removeClass('hidden');\r\n    \t\t});\r\n        }\r\n\r\n\t\tuploader.open();\r\n\t}).on('click', '[data-remove-image]', function(evt){\r\n        var button = $(this);\r\n\r\n        evt.preventDefault();\r\n\r\n        button.addClass('hidden').closest('[data-image-box]').find('[data-image-preview]').children().remove();\r\n        button.closest('[data-image-box]').find('[data-image-id]').val('');\r\n    });\r\n\r\n});\r\n"],"sourceRoot":"assets/scripts/"}